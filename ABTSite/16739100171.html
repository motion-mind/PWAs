<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms"><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="generator" content="SCHEMA ST4, Bootstrap 2019 v1" /><meta name="id" content="16739100171" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="msapplication-config" content="none" /><meta name="description" content="Startup function and alarm handling for flat plants" /><link rel="icon" type="image/x-icon" href="../assets/ico/favicon.ico" /><link layout-comment="OpenIconic-Font" rel="stylesheet" href="../assets/css/open-iconic-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base_ltr/01-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base_ltr/07-jquery.typeahead.min.css" /><link rel="stylesheet" href="../assets/css/schema-glyphs.css" /><link rel="stylesheet" href="../assets/css/formats.css" /><link rel="stylesheet" href="../assets/css/custom.css" /><link rel="stylesheet" href="../assets/css/custom/custom_fonts.css" /><link rel="stylesheet" href="../assets/css/custom/custom_typeahead.css" /><meta name="prev" content="17102595851" /><meta name="next" content="26626214411" /><meta name="next" content="30649308811" /><script>var fileExtension = "html";</script><title>Startup function and alarm handling for flat plants</title></head><body class="schema-index content-container container" id="16739100171" lang="en-US" xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms" data-node-id="16739100171" data-culture="en-US" dir="ltr"><header class="d-print-none"><nav class="d-flex" aria-label="Breadcrumb Naviagation"><ol class="breadcrumb "><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="index_content">Home</a></li><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="30649105803">Desigo Primary Automation</a></li><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="14772029451">Programming basics</a></li><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="15075293323">Functions and workflows</a></li><li class="breadcrumb-item active">Startup function and alarm handling for flat plants</li></ol></nav></header><article class="highlightable" role="main" aria-labelledby="heading-16739100171"><h1 id="heading-16739100171">Startup function and alarm handling for flat plants</h1><p>There are various ways to perform alarm indication and alarm acknowledgement.</p><p>In addition, a routine is available to automatically acknowledge alarms when automatically starting up the plant.</p><p>The settings are made in the nested plan SttUpAlmHdl Startup and alarm handling.</p><p>Example: Start-up function in plant example Ahu21 Air handling unit</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16876414091__Web.png" width="431" height="321" /></figure><p>The terms events and alarms are synonymous below for our purposes.</p><div class="textmodule" id="16876640395"><a class="card" href="#collapse16876640395" data-bs-toggle="collapse" data-bs-entries="">Switch off individual plants</a><div class="collapse" id="collapse16876640395"><div class="metalist"></div><p>Individual plants can be switched off in the <strong>Programming</strong> editor. PAR_BO is set to 1 to this end. This may be desirable, for example, if multiple plants are included on one automation station, but only a portion of the plants are operated, since not all parts are operational.</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16876419467__Web.png" width="322" height="94" /></figure><div class="image"></div><div class="linklist"></div></div></div><div class="textmodule" id="16791695627"><div class="metalist"></div>
<div class="textmodule" id="27383000971">
<p><strong>Startup behavior</strong></p> 
<p>The following functionality is available for an automatic startup of the plant, e.g., after a loss and subsequent return of power:</p> 
<ul class="list"><li value="1">Fixed switch-on times. These can be set on input [DlySttUp]. The output [Lock] is "True" and the plant remains switched off. The plant remains off to ensure that communications are reliable and cross-check references are triggered.</li><li value="2">Automatic acknowledge (2x) of possible pending alarms during a fixed switch-on delay.</li><li value="3">Additional adjustable delay for staged plant ramp-up. This can be set on input pin [DlyOn].</li><li value="4">Output [TiLock] displays the entire period of the delay, i.e., [DlySttUp] + [DlyOn].</li><li value="5">Output [TiLockRmg] displays the remaining time until the output [Lock] is set to "False".</li></ul></div> 
<p><strong>Example: Return of power after a power outage</strong></p> 
<ul class="list"><li value="1">Fixed switch-on delay [DlySttUp] = 50 [s]</li><li value="2">Timeframe for automatic acknowledge = 20 [s]. Can be set in the nested chart SttUpFnct at input [In] of PAR_TI.</li><li value="3">Plant delay [DlyOn] = 10 [s] to prevent all plants from starting at the same time (avoiding voltage peaks).</li></ul> 
<figure class="img_original" aria-label="Fig. "><img src="../Images/png/16805264779__Web.png" width="563" height="313" /></figure> 
<p><strong>Workflow in nested plant SttUpAlmHdl</strong></p> 
<p>The controller starts and the S7 process (Simatic version 7) operates. </p> 
<ol class="list"><li value="1">Output [Lock] is 1, activating the general exception mode. This switches off all plant components at priority 5.</li><li value="2">The first 30 [s] are used to establish communications (50 [s] - 20 [s]).</li><li value="3">In the following 20 [s], all alarms pending on a plant are automatically acknowledged twice (Ack).</li><li value="4">The entered additional delay [DlyOb] takes effect.</li><li value="5">Output [Lock] is set to 0 and the plant goes to normal operation.</li></ol> 
<p>Output [TiLock] displays the entire period of the delay, in other words [DlySttUp] + [DlyOn].<br />An exception is reported as the reason for the present operating mode.<br />Output [TiLockRmg] displays the remaining time until the output [Lock] is set to 0. </p><div class="image"></div><div class="linklist"><a class="schema-iframe-link" data-node-id="16739100171" id="schema-linklist-link16739100171" href="16739100171.html#27383000971"></a></div></div><div class="textmodule" id="16791697163"><a class="card" href="#collapse16791697163" data-bs-toggle="collapse" data-bs-entries="">Alarm handling</a><div class="collapse" id="collapse16791697163"><div class="metalist"></div><p><strong>Alarm handling in nested plant SttUpAlmHdl</strong></p><p>The state of events on the plant is acquired by BACnet object 'Plant state'. The state is mapped on <a class="schema-iframe-link" data-node-id="15426233611" id="schema-linklist-link15426233611" href="15426233611.html">CMN_EVT</a>.</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16828178955__Web.png" width="637" height="842" /></figure><p>The following functions are available:</p><ol class="list"><li value="1">Automatic acknowledge (2x) after <a class="schema-iframe-link" data-node-id="16739100171" id="schema-linklist-link16739100171" href="16739100171.html#16791695627" onclick="$('div#16791695627 a.card').click();document.getElementById('16791695627').scrollIntoView();">startup</a></li><li value="2">Alarm acknowledgement with a value object</li><li value="3">Logic for alarm indication:<br />- On for pending alarms<br />- Flashing for unprocessed alarms</li><li value="4">Connect an acknowledge button [BI]</li><li value="5">Connect an alarm indication, e.g. an alarm lamp through an output block [BO]</li><li value="6">Connect to other alarm handling functions on other plants, e.g. acknowledge button and alarm indication for multiple plants in the same control cabinet</li></ol><p><strong>Automatic acknowledge (2x) after startup</strong></p><p>After controller startup and a short delay, a logic automatically generates two impulses that affect the input [Ack] of CMN_EVT.</p><p><strong>Alarm acknowledgement with a value object</strong></p><p>Within the nested chart SttUpAlmHdl, alarm acknowledgement is prepared using a software acknowledge button.</p><p>The BACnet object Acknowledgement (Ack) acknowledged the impulses. The present value is acquired using an input block R_B (Read Binary) and transferred to input [Ack] of function block CMN_EVT. The property 'Present value' of the BACnet object Ack acknowledges by setting a BACnet client to 1. </p><p>In order for operation to mimic a button, the property 'Present value' of the BACnet object ACK must automatically reset to 0. A timer logic is prepared for this. If [Ack.PrVal] = 1, the logic writes, after a period of 2 [s] via function block WP_BOOL connected to [Ack.PrVal], the value [Ack.PrVa] l= 0.</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16876410379__Web.png" width="393" height="368" /></figure><p><strong>Alarm indication</strong></p><p>The CMN_EVT has two outputs for alarm indication:</p><ul class="list"><li value="1">EvtInd<br />The value of the output is 1 on a pending alarm, in other words, if, in the hierarchy level (or lower) of the object Alarm state, at least one event of BACnet type 'Offnormal' or 'Fault' is active.</li><li value="2">AckSta<br />The value of the output is 1 on an unprocessed alarm, in other words, if, in the hierarchy level (or lower) of object Plant state, a state transition (To-Fault, To-OffNormal) is unacknowledged on at least one object.</li></ul><p>The two outputs are evaluated and are forwarded to output [Lmp] of the nested chart SttUpAlmHdl. An output block BO can be connected via a CMD_B to control an alarm lamp.</p><table class="table tabletype-header table-fixed" aria-label="" data-legend-id="ID0EHPPJB"><colgroup><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col></colgroup><thead><tr><th><p class="text-left">Pending alarm [EvtInd]</p></th><th><p class="text-left">Unprocessed alarm [AckSta]</p></th><th><p class="text-left">[FltInd]</p></th></tr></thead><tbody><tr><td>
<p class="text-left">0</p></td><td><p class="text-left">0</p></td><td><p class="text-left">Off</p></td></tr><tr><td><p class="text-left">1</p></td><td><p class="text-left">0</p></td><td><p class="text-left">Steady on</p></td></tr><tr><td><p class="text-left">1</p></td><td><p class="text-left">1</p></td><td><p class="text-left">Flashing</p></td></tr><tr><td><p class="text-left">0</p></td><td><p class="text-left">1</p></td><td><p class="text-left">Flashing</p></td></tr></tbody></table><p>The cycle generator for flashing is designed as an output [Blink]. The same cycle can be used from the output for other indications, e.g. for an operating lamp during startup.</p><p><strong>Example: Alarm indication and acknowledge button for 1 automation station with 1 plant</strong></p><p>1 automation station includes 1 plant.<br />Events are indicated by an alarm indication (e.g. lamp) on the front of the control cabinet and acknowledged using an acknowledge button.</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16828140043__Web.png" width="640" height="468" /></figure><p> </p><p><strong>Example: Separate indication and acknowledge button for 1 automation station with 3 plants</strong></p><p>1 automation station includes 3 plants.<br />Events for each of the three plants are indicated by an alarm indication (e.g. lamp) on the front of the control cabinet and acknowledged using an acknowledge button.</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16828143371__Web.png" width="640" height="804" /></figure><p> </p><p><strong>Example: Common alarm indication and acknowledge button for 1 automation station with 3 plants</strong></p><p>1 automation station includes 3 plants and alarm handling<br />Events collected for the three plants are displayed on the front of the control cabinet via an alarm indication (e.g. lamp) and acknowledged with an acknowledge button.<br />Alarm handling is defined on the same automation station as the additional plant.</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16828146699__Web.png" width="641" height="1014" /></figure><p> </p><p><strong>Example: Common alarm indication and acknowledge button for 2 automation stations with 3 plants in the same control cabinet.</strong></p><p>2 automation stations include 3 plants and alarm handling<br />Events collected for the three plants are displayed on the front of the control cabinet via an alarm indication (e.g. lamp) and acknowledged with an acknowledge button.<br />Alarm handling is defined on the second automation station as the additional plant.</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/16828150027__Web.png" width="640" height="1013" /></figure><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="linklist"><a class="schema-iframe-link" data-node-id="15426233611" id="schema-linklist-link15426233611" href="15426233611.html"></a><a class="schema-iframe-link" data-node-id="16739100171" id="schema-linklist-link16739100171" href="16739100171.html#16791695627" onclick="$('div#16791695627 a.card').click();document.getElementById('16791695627').scrollIntoView();"></a></div></div></div><p> </p><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div><div class="image"></div></article><footer><p class="text-muted">ABT Site V6.0
</p><p class="text-muted" aria-label="copyright">© 2014 - 2025 Siemens Schweiz AG</p></footer><script src="../assets/js/00-jquery-3.6.3.min.js"></script><script src="../assets/js/01-popper.min.js"></script><script src="../assets/js/02-schema.js"></script><script src="../assets/js/03-snap.svg-min.js"></script><script src="../assets/js/04-schema-common-search.js"></script><script src="../assets/js/05-svg-highlight.js"></script><script src="../assets/js/22-highlight-function.js"></script><script src="../assets/js/23-jquery-typeahead.min.js"></script><script src="../assets/js/24-autocompletion.js"></script><script src="../assets/js/25-collapsible.js"></script><script src="../assets/js/32-highlight-results.js"></script><script src="../assets/js/50-show-highlight-results.js"></script><script src="../assets/js_ltr/06-bootstrap.min.js"></script><script src="../assets/js_iframe/00-schema-iframe.js"></script></body></html>