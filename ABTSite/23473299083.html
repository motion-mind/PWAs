<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms"><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="generator" content="SCHEMA ST4, Bootstrap 2019 v1" /><meta name="id" content="23473299083" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="msapplication-config" content="none" /><meta name="description" content="[DIFFPRDR] Difference of a period for real values" /><link rel="icon" type="image/x-icon" href="../assets/ico/favicon.ico" /><link layout-comment="OpenIconic-Font" rel="stylesheet" href="../assets/css/open-iconic-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base_ltr/01-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base_ltr/07-jquery.typeahead.min.css" /><link rel="stylesheet" href="../assets/css/schema-glyphs.css" /><link rel="stylesheet" href="../assets/css/formats.css" /><link rel="stylesheet" href="../assets/css/custom.css" /><link rel="stylesheet" href="../assets/css/custom/custom_fonts.css" /><link rel="stylesheet" href="../assets/css/custom/custom_typeahead.css" /><meta name="prev" content="23560919563" /><meta name="next" content="16853609355" /><meta name="next" content="30649308811" /><script>var fileExtension = "html";</script><title>[DIFFPRDR] Difference of a period for real values</title></head><body class="schema-index content-container container" id="23473299083" lang="en-US" xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms" data-node-id="23473299083" data-culture="en-US" dir="ltr"><header class="d-print-none"><nav class="d-flex" aria-label="Breadcrumb Naviagation"><ol class="breadcrumb "><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="index_content">Home</a></li><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="30649105803">Desigo Primary Automation</a></li><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="15246172939">Programming library</a></li><li class="breadcrumb-item"><a class="schema-iframe-link schema-breadcrumb-link" href="#" data-node-id="14096341515">Function blocks</a></li><li class="breadcrumb-item active">[DIFFPRDR] Difference of a period for real values</li></ol></nav></header><article class="highlightable" role="main" aria-labelledby="heading-23473299083"><h1 id="heading-23473299083">[DIFFPRDR] Difference of a period for real values</h1><div class="alias"></div><div class="textmodule" id="23473306123"><div class="metalist"></div>
<p>Function block DIFFPRDR determines the differential value for a real counter value within a specific time period. </p></div><div class="textmodule" id="23473319819"><div class="metalist"></div>
<p>DIFFPRDR determines the differential value for a real counter value within a specific time period. </p></div><div class="textmodule" id="23473320715"><a class="card" href="#collapse23473320715" data-bs-toggle="collapse" data-bs-entries="">Functioning</a><div class="collapse" id="collapse23473320715"><div class="metalist"></div><p><strong>Enable and disable the function</strong></p><p>The differential value of a counter value [In] within a time period is determined if the function is enabled (EnFnct = 1 and Imp = 1). The function does not start with [EnFnct] only. A pulse at [Imp] is required to start the function.</p><p><strong>Calculation</strong></p><p>The differential value for the present time period is displayed on [PrVal]. After the time period has expired, the present differential value is saved as differential value for the recent time period [RctVal] and set to zero via a pulse. The time period, generated outside of DIFFPRDR, is determined via a rising slope on the input [Imp]. If the input signal is invalid (Vldty = 0), the calculation stops. The last valid values from the outputs are frozen until the signal is valid again. If the input value is smaller than the differential value saved at a pulse, the difference becomes invalid. If the signal or the differential value is invalid at pulse time, no valid difference can be generated for the next two time periods. This information is provided at output [VldtyDly].</p><p><strong>Reset</strong></p><p>All present and recent values are set to zero via a rising slope on input [Reset].</p><p><strong>Startup</strong></p><p>First time period: After the first pulse, the present value at input [In] is saved as reference for a further differential value generation. After the pulse, [VldtyDly] = 1 after a delay (25 AS cycles). From the first pulse, a difference is generated on output [PrVal] for an increasing counter value at input [In].</p><p>Second time period: After the second pulse, the present differential value is saved as differential value on [PrVal] for the recent time period [RctVal] and set to zero.</p><section class="safety safety-type-info safety-severity-info" aria-label="    Information"><div class="safety-body row"><div class="safety-symbol" aria-label="aria.safetySymbol"><img src="../safety/info_Info.gif" alt="info" /></div><div class="safety-content" aria-label="description"><p class="safety-consequence" aria-label="Consequences">For a time period of 1 day, a differential value that can be evaluated and provided only after the 2nd pulse (after 2 days).<br />If a full download is performed, all values are reset and data may be lost as a consequence.</p></div></div></section></div></div><div class="textmodule" id="23473321611"><a class="card" href="#collapse23473321611" data-bs-toggle="collapse" data-bs-entries="">Pins</a><div class="collapse" id="collapse23473321611"><div class="metalist"></div><table class="table tabletype-header table-fixed" id="9007214841301259" aria-label="" data-legend-id="ID0EAPB6"><colgroup><col style="width: 17.4%;"></col><col style="width: 52.1%;"></col><col style="width: 12.4%;"></col><col style="width: 17.9%;"></col></colgroup><thead><tr><th><p class="text-left">Input</p></th><th><p class="text-left">Description</p></th><th><p class="text-left">Data type</p></th><th><p class="text-left">Default value<br />Value range</p></th></tr></thead><tbody><tr><td id="23604628747" rowspan="2"><p class="text-left"><span class="variable">EnFnct</span></p></td><td><p class="text-left"><span class="variable">Enable function</span></p><p class="text-left">Enables the function.</p></td><td><p class="text-left">Boolean</p></td><td><p class="text-left">1</p></td></tr><tr><td colspan="3"><p class="text-left">0 - The function is disabled. <br />1 - The function is enabled.</p></td></tr><tr><td id="23583822091"><p class="text-left"><span class="variable">In</span></p></td><td><p class="text-left"><span class="variable">Input</span></p><p class="text-left">Input signal</p></td><td><p class="text-left">Real</p></td><td><p class="text-left">0.0</p></td></tr><tr><td id="23561884811" rowspan="2"><p class="text-left"><span class="variable">Imp</span></p></td><td><p class="text-left"><span class="variable">Impulse</span></p><p class="text-left">Pulse input for which the evaluation time period is determined. The rising edge indicates start of new period. </p></td><td><p class="text-left">Boolean</p></td><td><p class="text-left">0</p></td></tr><tr><td colspan="3"><p class="text-left">0 - No<br />1 - Yes</p></td></tr><tr><td id="23604575627" rowspan="2">
<p class="text-left"><span class="variable">Vldty</span></p></td><td><p class="text-left"><span class="variable">Validity</span></p>
<p class="text-left">The differential value from the present and recent time periods can only be calculated with a valid input signal. </p></td><td><p class="text-left">Boolean</p></td><td><p class="text-left">1</p></td></tr><tr><td colspan="3"><p class="text-left">0 - The input signal is not valid.<br />1 - The input signal is valid.<br /></p></td></tr><tr><td id="23621817739" rowspan="2"><p class="text-left"><span class="variable">Reset</span></p></td><td><p class="text-left"><span class="variable">Reset</span></p><p class="text-left">All values are reset to zero.</p></td><td><p class="text-left">Boolean</p></td><td><p class="text-left">0</p></td></tr><tr><td colspan="3"><p class="text-left">0 - No<br />1 - Yes</p></td></tr><tr><td id="15714136971" rowspan="2"><p class="text-left"><span class="variable">Pers</span></p></td><td><p class="text-left"><span class="variable">Persistent</span></p></td><td><p class="text-left">Boolean</p></td><td><p class="text-left">0</p></td></tr><tr><td colspan="3"><p class="text-left">0 - <span class="variable">No</span><br />1 - <span class="variable">Yes</span>: the values are stored persistently.</p></td></tr><tr><td id="23975712651"><p class="text-left"><span class="variable">TshVal</span></p></td><td><p class="text-left"><span class="variable">Threshold value</span></p></td><td><p class="text-left">Real</p></td><td><p class="text-left">0.1</p></td></tr><tr><td id="15714241291">
<p class="text-left"><span class="variable">BaObjRef</span></p></td><td><p class="text-left"><span class="variable">BA-Object reference</span><br />Link between function block and BACnet object.</p></td><td><p class="text-left">Structure</p></td><td><p class="text-left">---</p></td></tr><tr><td><p class="text-left"><span class="variable">BaObjRef</span><br />&gt; <span class="variable">DeviceID</span></p></td><td><p class="text-left"><span class="variable">Device identifier</span><br />[<span class="variable">DeviceID</span>] includes object type and object instance in one ID. <br />Identifies the device object: local or remote. A local device object can also be identified by value 16#3FFFFF.</p></td><td><p class="text-left">Double Word</p></td><td><p class="text-left">16#3FFFFF</p></td></tr><tr><td><p class="text-left"><span class="variable">BaObjRef</span><br />&gt; <span class="variable">ObjectID</span></p></td><td><p class="text-left"><span class="variable">Object identifier</span><br />[<span class="variable">ObjectID</span>] includes object type and object instance in one ID.<br />Identifies the object on a device.</p></td><td><p class="text-left">Double Word</p></td><td><p class="text-left">16#3FFFFF</p></td></tr><tr><td><p class="text-left"><span class="variable">BaObjRef</span><br />&gt; <span class="variable">ItemID</span></p></td><td><p class="text-left"><span class="variable">Item identifier</span><br />[<span class="variable">ItemID</span>] represents an index in a view node object that references the BACnet object.<br />[<span class="variable">ObjectID</span>] and [<span class="variable">ItemID</span>] together define an indirect reference to the BACnet object.<br />Value -1 indicates a direct interface.</p></td><td><p class="text-left">Integer</p></td><td><p class="text-left">-1 </p></td></tr></tbody></table><p> </p><table class="table tabletype-header table-fixed" id="9007214915515019" aria-label="" data-legend-id="ID0EAPB6"><colgroup><col style="width: 17.4%;"></col><col style="width: 52.1%;"></col><col style="width: 12.4%;"></col><col style="width: 17.9%;"></col></colgroup><thead><tr><th><p class="text-left">Output</p></th><th><p class="text-left">Description</p></th><th><p class="text-left">Data type</p></th><th><p class="text-left">Default value<br />Value range</p></th></tr></thead><tbody><tr><td id="23621412875"><p class="text-left"><span class="variable">PrVal</span></p></td><td><p class="text-left"><span class="variable">Present value</span></p></td><td><p class="text-left">Real</p></td><td><p class="text-left">0.0</p></td></tr><tr><td id="23621414795"><p class="text-left"><span class="variable">RctVal</span></p></td><td><p class="text-left"><span class="variable">Recent value</span></p> </td><td><p class="text-left">Real</p></td><td><p class="text-left">0.0</p></td></tr><tr><td id="23601067403" rowspan="2">
<p class="text-left"><span class="variable">VldtyDly</span></p></td><td><p class="text-left"><span class="variable">Validity with delay</span></p></td><td><p class="text-left">Boolean</p></td><td><p class="text-left">0</p></td></tr><tr><td colspan="3"><p class="text-left">0 - Not valid <br />1 - Valid</p></td></tr><tr><td id="16579028747"><p class="text-left"><span class="variable">Dstb</span></p></td><td><p class="text-left"><span class="variable">Disturbed</span></p><p class="text-left">[Dstb] indicates whether the referenced BACnet object was accessed. <br />[Dstb] = 0, if: <br />BACnet object access = Access successful <br />[Dstb] = 1, if: <br />BACnet object access = Error during access</p></td><td><p class="text-left">Boolean</p></td><td><p class="text-left">0</p></td></tr><tr><td id="15709580811" rowspan="2"><p class="text-left"><span class="variable">ErrCode</span></p></td><td><p class="text-left"><span class="variable">Error code indication</span></p></td><td><p class="text-left">Integer</p></td><td><p class="text-left">0: <span class="variable">No error</span></p></td></tr><tr><td colspan="3"><p class="text-left">= 0 - <span class="variable">No error</span><br />&gt; 0 - <a class="schema-iframe-link" data-node-id="14157693067" id="schema-linklist-link14157693067" href="14157693067.html">Error codes</a></p></td></tr></tbody></table><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"><a class="schema-iframe-link" data-node-id="14157693067" id="schema-linklist-link14157693067" href="14157693067.html"></a></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"></div><div class="linklist"><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#15586560267"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#15660774027"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23601067403"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23604628747"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23561884811"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23604575627"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23621817739"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23621414795"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#15714136971"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#15714241291"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#16579028747"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#15709580811"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23975712651"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23583822091"></a><a class="schema-iframe-link" data-node-id="23473299083" id="schema-linklist-link23473299083" href="23473299083.html#23621412875"></a></div></div></div><div class="textmodule" id="23473322507"><a class="card" href="#collapse23473322507" data-bs-toggle="collapse" data-bs-entries="">Application</a><div class="collapse" id="collapse23473322507"><div class="metalist"></div><p>DIFFPRDR is used to calculate the differential value derived from the counter status within a time period. By displaying present and recent values, daily consumption, for example, can be calculated for a specific time period.</p><p>The following example is based on an evaluation period = 1 day:</p><figure class="img_original" aria-label="Fig. "><img src="../Images/png/9007223278555915__Web.png" width="640" height="195" /></figure><div class="image"></div><div class="linklist"></div></div></div><div class="image"></div></article><footer><p class="text-muted">ABT Site V6.0
</p><p class="text-muted" aria-label="copyright">© 2014 - 2025 Siemens Schweiz AG</p></footer><script src="../assets/js/00-jquery-3.6.3.min.js"></script><script src="../assets/js/01-popper.min.js"></script><script src="../assets/js/02-schema.js"></script><script src="../assets/js/03-snap.svg-min.js"></script><script src="../assets/js/04-schema-common-search.js"></script><script src="../assets/js/05-svg-highlight.js"></script><script src="../assets/js/22-highlight-function.js"></script><script src="../assets/js/23-jquery-typeahead.min.js"></script><script src="../assets/js/24-autocompletion.js"></script><script src="../assets/js/25-collapsible.js"></script><script src="../assets/js/32-highlight-results.js"></script><script src="../assets/js/50-show-highlight-results.js"></script><script src="../assets/js_ltr/06-bootstrap.min.js"></script><script src="../assets/js_iframe/00-schema-iframe.js"></script></body></html>